package br.com.eccomerce.model;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import br.com.eccomerce.dao.ClienteDAO;
import br.com.eccomerce.dao.ProdutoDAO;
import br.com.eccomerce.dao.ProdutoPedidoDAO;

public class Pedido {
	private int PED_CODIGO;
	private int CLI_CODIGO;
	private Date PED_DATA;
	
	public int getPED_CODIGO() {
		return PED_CODIGO;
	}
	public void setPED_CODIGO(int pED_CODIGO) {
		PED_CODIGO = pED_CODIGO;
	}
	public int getCLI_CODIGO() {
		return CLI_CODIGO;
	}
	public void setCLI_CODIGO(int cLI_CODIGO) {
		CLI_CODIGO = cLI_CODIGO;
	}
	public Date getPED_DATA() {
		return PED_DATA;
	}
	public void setPED_DATA(Date pED_DATA) {
		PED_DATA = pED_DATA;
	}

	public String toString() {
		List<ProdutoPedido> produtosPedidos = ProdutoPedidoDAO.listProdutoPedido(this.PED_CODIGO);
		List<Produto> produtos = new ArrayList<Produto>();
		
		Cliente cliente = new Cliente();
		cliente = ClienteDAO.getCliente(this.CLI_CODIGO);
		
		double valorTotal = 0;
		
		for(ProdutoPedido produtoPedido : produtosPedidos) {
			Produto item = ProdutoDAO.getProduto(produtoPedido.getPRO_CODIGO());
			valorTotal += item.getPRO_VALOR() * produtoPedido.getPED_CODIGO();
			
			produtos.add(item);
		}
		String saida = "CODIGO: " + this.getCLI_CODIGO()
						+ "\nCLIENTE: " + cliente.getCLI_NOME()
						+ "\nPRODUTOS: \n";
		int i = 0;
		for(Produto item : produtos) {
			saida += item.toStringSpace();
		}
		
		saida += "TOTAL: R$" + valorTotal + "\n";
		
		return saida;
	}
}
